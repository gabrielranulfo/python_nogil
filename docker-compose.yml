version: '3.8'

services:
  python314-gil:
    build:
      context: .
      dockerfile: Dockerfile.python314-gil
    container_name: python314-gil
    environment:
      - PYTHON_VERSION=3.14-gil
      - PYTHON_BIN=/usr/local/bin/python3.14
      - PYTHON_GIL=1
      - SCALE_FACTOR=1.0
      - PATH=/usr/local/bin:${PATH}
    networks:
      - python-network
    stdin_open: true
    tty: true

  python314-nogil:
    build:
      context: .
      dockerfile: Dockerfile.python314-nogil
    container_name: python314-nogil
    environment:
      - PYTHON_VERSION=3.14-nogil
      - PYTHON_BIN=/usr/local/bin/python3.14
      - PYTHON_GIL=0
      - SCALE_FACTOR=1.0
      - PATH=/usr/local/bin:${PATH}
    networks:
      - python-network
    stdin_open: true
    tty: true

networks:
  python-network:
    driver: bridge
